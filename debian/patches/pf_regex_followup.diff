--- a/src/contrib/pf/authpf/authpf.c
+++ b/src/contrib/pf/authpf/authpf.c
@@ -19,6 +19,7 @@
 #include <sys/cdefs.h>
 __FBSDID("$FreeBSD$");
 
+#include <sys/param.h>
 #include <sys/types.h>
 #include <sys/file.h>
 #include <sys/ioctl.h>
@@ -155,7 +156,7 @@
 	else
 		shell = pw->pw_shell;
 
-#if 0
+#ifndef __FreeBSD__
 	login_close(lc);
 #endif
 
@@ -163,7 +164,7 @@
 	    strcmp(shell, PATH_AUTHPF_SHELL_NOIP)) {
 		syslog(LOG_ERR, "wrong shell for user %s, uid %u",
 		    pw->pw_name, pw->pw_uid);
-#if 1
+#ifdef __FreeBSD__
 	login_close(lc);
 #else
 		if (shell != pw->pw_shell)
@@ -172,7 +173,7 @@
 		goto die;
 	}
 
-#if 1
+#ifdef __FreeBSD__
 	login_close(lc);
 #else
 	if (shell != pw->pw_shell)
--- a/src/contrib/pf/ftp-proxy/ftp-proxy.c
+++ b/src/contrib/pf/ftp-proxy/ftp-proxy.c
@@ -19,6 +19,7 @@
 #include <sys/cdefs.h>
 __FBSDID("$FreeBSD$");
 
+#include <sys/param.h>
 #include <sys/queue.h>
 #include <sys/types.h>
 #include <sys/time.h>
--- a/src/contrib/pf/libevent/kqueue.c
+++ b/src/contrib/pf/libevent/kqueue.c
@@ -30,6 +30,7 @@
 #include "config.h"
 #endif
 
+#include <sys/param.h>
 #include <sys/types.h>
 #ifdef HAVE_SYS_TIME_H
 #include <sys/time.h>
--- a/src/contrib/pf/pfctl/parse.y
+++ b/src/contrib/pf/pfctl/parse.y
@@ -30,6 +30,7 @@
 #include <sys/cdefs.h>
 __FBSDID("$FreeBSD$");
 
+#include <sys/param.h>
 #include <sys/types.h>
 #include <sys/socket.h>
 #include <sys/stat.h>
--- a/src/contrib/pf/pfctl/pf_print_state.c
+++ b/src/contrib/pf/pfctl/pf_print_state.c
@@ -33,6 +33,7 @@
 #include <sys/cdefs.h>
 __FBSDID("$FreeBSD$");
 
+#include <sys/param.h>
 #include <sys/types.h>
 #include <sys/socket.h>
 #if 1
--- a/src/contrib/pf/pfctl/pfctl.c
+++ b/src/contrib/pf/pfctl/pfctl.c
@@ -34,6 +34,7 @@
 #include <sys/cdefs.h>
 __FBSDID("$FreeBSD$");
 
+#include <sys/param.h>
 #include <sys/types.h>
 #include <sys/ioctl.h>
 #include <sys/socket.h>
--- a/src/contrib/pf/pfctl/pfctl_altq.c
+++ b/src/contrib/pf/pfctl/pfctl_altq.c
@@ -21,6 +21,7 @@
 #include <sys/cdefs.h>
 __FBSDID("$FreeBSD$");
 
+#include <sys/param.h>
 #include <sys/types.h>
 #include <sys/ioctl.h>
 #include <sys/socket.h>
--- a/src/contrib/pf/pfctl/pfctl_optimize.c
+++ b/src/contrib/pf/pfctl/pfctl_optimize.c
@@ -19,6 +19,7 @@
 #include <sys/cdefs.h>
 __FBSDID("$FreeBSD$");
 
+#include <sys/param.h>
 #include <sys/types.h>
 #include <sys/ioctl.h>
 #include <sys/socket.h>
--- a/src/contrib/pf/pfctl/pfctl_qstats.c
+++ b/src/contrib/pf/pfctl/pfctl_qstats.c
@@ -19,6 +19,7 @@
 #include <sys/cdefs.h>
 __FBSDID("$FreeBSD$");
 
+#include <sys/param.h>
 #include <sys/types.h>
 #include <sys/ioctl.h>
 #include <sys/socket.h>
--- a/src/contrib/pf/pflogd/pflogd.c
+++ b/src/contrib/pf/pflogd/pflogd.c
@@ -33,6 +33,7 @@
 #include <sys/cdefs.h>
 __FBSDID("$FreeBSD$");
 
+#include <sys/param.h>
 #include <sys/types.h>
 #include <sys/ioctl.h>
 #include <sys/file.h>
--- a/src/contrib/pf/pflogd/privsep.c
+++ b/src/contrib/pf/pflogd/privsep.c
@@ -20,6 +20,7 @@
 #include <sys/cdefs.h>
 __FBSDID("$FreeBSD$");
 
+#include <sys/param.h>
 #include <sys/types.h>
 #include <sys/time.h>
 #include <sys/socket.h>
--- a/src/contrib/pf/tftp-proxy/filter.c
+++ b/src/contrib/pf/tftp-proxy/filter.c
@@ -20,6 +20,7 @@
 #include <syslog.h>
 
 #include <sys/ioctl.h>
+#include <sys/param.h>
 #include <sys/types.h>
 #include <sys/socket.h>
 
